===============
import org.openqa.selenium.TakesScreenshot;
import org.openqa.selenium.OutputType;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.io.FileHandler;
import java.io.File;
import java.io.IOException;

public class ScreenshotUtility {
    public static String captureScreenshot(WebDriver driver, String testName) throws IOException {
    
        TakesScreenshot ts = (TakesScreenshot) driver;
        File source = ts.getScreenshotAs(OutputType.FILE);
        
        String dest = System.getProperty("user.dir") + "/screenshots/" + testName + ".png";
        
       File destination = new File(dest);
        FileHandler.copy(source, destination);
        
        return dest; 
    }
}
==========================
import org.openqa.selenium.WebDriver;
import org.testng.ITestContext;
import org.testng.ITestListener;
import org.testng.ITestResult;

import java.io.IOException;

public class ScreenshotListener implements ITestListener {

    private WebDriver driver;

    @Override
    public void onTestFailure(ITestResult result) {
         driver = (WebDriver) result.getTestContext().getAttribute("driver");

        try {
            String screenshotPath = ScreenshotUtility.captureScreenshot(driver, result.getName());
            Reporter.log("<a href='" + screenshotPath + "' target='_blank'>Screenshot</a>");
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    @Override
    public void onTestSuccess(ITestResult result) {
             driver = (WebDriver) result.getTestContext().getAttribute("driver");

        try {
            String screenshotPath = ScreenshotUtility.captureScreenshot(driver, result.getName());
            Reporter.log("<a href='" + screenshotPath + "' target='_blank'>Screenshot</a>");
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

}
=======================
<?xml version="1.0" encoding="UTF-8"?>
<suite name="Suite" verbose="1">
    <listeners>
        <listener class-name="com.example.ScreenshotListener"/>
    </listeners>
    <test name="MyTest">
        <classes>
            <class name="com.example.MyTestClass"/>
        </classes>
    </test>
</suite>
=======================
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.chrome.ChromeDriver;
import org.testng.Assert;
import org.testng.annotations.BeforeMethod;
import org.testng.annotations.Test;

public class MyTestClass {

    private WebDriver driver;

    @BeforeMethod
    public void setUp() {
      driver = new ChromeDriver();
    }

    @Test
    public void testMethod1() {
        driver.get("https://www.example.com");
       Assert.assertTrue(false, "Test failed intentionally");
    }
    @Test
    public void testMethod2() {
        driver.get("https://www.example.com");
       Assert.assertTrue(true, "Test passed successfully");
    }
}
===============================